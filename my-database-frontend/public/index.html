<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Retail Management System</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Global message container -->
    <div id="globalMessage" style="position: fixed; top: 20px; right: 20px; z-index: 9999"></div>

    <!-- Side bar container -->
    <div class="sidebar">
      <a onclick="openTab('home', this)" class="active-tab">Home</a>
      <a onclick="openTab('customer', this)">Customer</a>
      <a onclick="openTab('product', this)">Product</a>
      <a onclick="openTab('category', this)">Category</a>
      <a onclick="openTab('sales', this)">Sales</a>
      <a onclick="openTab('suppliers', this)">Suppliers</a>
    </div>

    <!-- Home container -->
    <div class="main-content">
      <div id="home" class="content show">
        <h2>Home Dashboard</h2>

        <div class="dashboard-metrics">
          <div class="metric-box">
            <h3>Customers</h3>
            <p id="totalCustomers">0</p>
          </div>

          <div class="metric-box">
            <h3>Suppliers</h3>
            <p id="totalSuppliers">0</p>
          </div>

          <div class="metric-box">
            <h3>Last Month Sales</h3>
            <p id="lastMonthSales">$0</p>
          </div>

          <div class="metric-box">
            <h3>This Month Sales</h3>
            <p id="thisMonthSales">$0</p>
          </div>

          <div class="metric-box">
            <h3>Today's Sales</h3>
            <p id="todaySales">$0</p>
          </div>
        </div>

        <div class="dashboard-content">
          <div>
            <h3>Available Products</h3>
           <!-- <div id="available_product_controls" class="table-controls"></div> -->
            <div id="available_product_record">Loading products...</div>
            <div id="available_product_pagination" class="pagination"></div>
          </div>

          <div>
            <!--<div id="available_product_controls" class="table-controls"></div> -->
            <h3>Sales Summary</h3>
            <div id="sales_summary_record"></div>
          </div>

        </div>

        <div>
            <h3>Monthly Product Sales Chart</h3>
            <canvas id="salesChart"></canvas>
          </div>
      </div>


    <!-- Customer container -->
      <div id="customer" class="content">
        <h2>Customer Page</h2>

        <form id="customerForm">
          <label style="font-weight: bold">First Name:</label><br />
          <input type="text" id="customer_first_name" required /><br />

          <label style="font-weight: bold">Last Name:</label><br />
          <input type="text" id="customer_last_name" required /><br />

          <label style="font-weight: bold">Contact:</label><br />
          <input type="text" maxlength="10" id="customer_contact" required /><br />

          <label style="font-weight: bold">Email:</label><br />
          <input type="email" id="customer_email" required /><br />

          <label style="font-weight: bold">Address:</label><br />
          <textarea id="customer_address" rows="4"></textarea><br />

          <button type="submit">Add Category</button>
        </form>

        <hr style="margin: 20px 0; border: 0; height: 1px; background-color: #ddd" />

        <h2>Customer Records</h2>

        <div id="customer_controls" class="table-controls"></div>
        <div id="customer_record">Manage your customers here.</div>
        <div id="customer_pagination" class="pagination"></div>
      </div>


    <!-- Product container -->
      <div id="product" class="content">
        <h2>Product Page</h2>

        <form id="productForm">
          <label style="font-weight: bold">Product Name:</label><br />
          <input type="text" id="product_name" required /><br />

          <label style="font-weight: bold">Category:</label><br />
          <select id="product_category" required></select><br />

          <label style="font-weight: bold">Supplier:</label><br />
          <select id="product_supplier" required></select><br />

          <label style="font-weight: bold">Price:</label><br />
          <input type="number" step="0.01" min="0"  id="product_price" required /><br />

          <label style="font-weight: bold">Quantity:</label><br />
          <input type="number" min="0" id="product_quantity" required /><br />

          <button type="submit">Add Product</button>
        </form>

        <hr style="margin: 20px 0; border: 0; height: 1px; background-color: #ddd" />

        <h2>Product Records</h2>

        <div style="width:50%;">
          <input type="text" id="productSearchBox" placeholder="Search products...">
        </div>

       <!-- <div id="product_controls" class="table-controls"></div> -->
        <div id="product_record">View and manage products.</div>
        <div id="product_pagination" class="pagination"></div>
      </div>


    <!-- Category container -->
      <div id="category" class="content">
        <h2>Category Page</h2>
        <form id="categoryForm">
          <label style="font-weight: bold">Category Name:</label><br />
          <input type="text" id="category_name" required /><br />

          <label style="font-weight: bold">Description:</label><br />
          <textarea id="description" rows="4"></textarea><br />

          <button type="submit">Add Category</button>
        </form>

        <hr style="margin: 20px 0; border: 0; height: 1px; background-color: #ddd" />

        <h2>Category Records</h2>

        <!--<div style="margin-bottom: 15px">
          <label style="font-weight: bold">Search Category:</label><br />
          <input type="text" id="categorySearchInput" placeholder="Enter category name..." style="width: 250px" />
          <button id="categorySearchBtn" style="padding: 9px 30px">Search</button>
        </div> -->

        <div id="category_controls" class="table-controls"></div>
        <div id="category_record">Product category details.</div>
        <div id="category_pagination" class="pagination"></div>
      </div>


    <!-- Sales container -->
      <div id="sales" class="content">
        <h2>Sales Page</h2>

          <form id="salesForm">
            <label style="font-weight: bold">Customer:</label><br />
            <select id="sales_customer" required></select><br />

            <label style="font-weight: bold">Product:</label><br />
            <select id="sales_product" required></select><br />

            <label style="font-weight: bold">Quantity:</label><br />
            <input type="number" min="0" id="sales_quantity_sold" required /><br />

            <label style="font-weight: bold">Total Amount:</label><br />
            <input type="number" step="0.01" min="0"  id="sales_total_amount" required /><br />

            <button type="submit">Add</button>
          </form>

        <hr style="margin: 20px 0; border: 0; height: 1px; background-color: #ddd" />

        <h2>Sale Records</h2>

        <div id="sales_controls" class="table-controls"></div>
        <div id="sales_sort">
          <div id="sales_dateRange">
            <label for="dateRange">Filter by:</label>
            <select id="dateRange">
              <option value="all" selected>All</option>
              <option value="1w">Last 1 Week</option>
              <option value="1m">Last 1 Month</option>
              <option value="3m">Last 3 Months</option>
            </select>
          </div>

          <div id="sales_order">
            <label for="order">Order by:</label>
            <select id="order">
              <option value="DESC" selected>DESC</option>
              <option value="ASC">ASC</option>
            </select>
          </div>
        </div>
        <div id="sales_record">View and record sales.</div>
        <div id="sales_pagination" class="pagination"></div>
      </div>


    <!-- Suppliers container -->
      <div id="suppliers" class="content">
        <h2>Suppliers Page</h2>

        <form id="suppliersForm">
          <label style="font-weight: bold">Supplier Name:</label><br />
          <input type="text" id="supplier_name" required /><br />

          <label style="font-weight: bold">Contact Person:</label><br />
          <input type="text" id="supplier_contact_person" required /><br />

          <label style="font-weight: bold">Phone Number:</label><br />
          <input type="text" maxlength="10" id="supplier_phone"/><br />

          <label style="font-weight: bold">Email:</label><br />
          <input type="email" id="supplier_email" /><br />

          <label style="font-weight: bold">Address:</label><br />
          <textarea id="supplier_address" rows="4"></textarea><br />

          <button type="submit">Add Supplier</button>
        </form>

        <hr style="margin: 20px 0; border: 0; height: 1px; background-color: #ddd" />

        <h2>Supplier Records</h2>

        <div id="suppliers_controls" class="table-controls"></div>
        <div id="suppliers_record">View and manage vendors.</div>
        <div id="suppliers_pagination" class="pagination"></div>
      </div>
    </div>



    <!-- Internal Scripting code -->
    <script>
      // Handle tab switching
      function openTab(tabId, element) {
        let contents = document.querySelectorAll(".content");
        let tabs = document.querySelectorAll(".sidebar a");

        contents.forEach((c) => c.classList.remove("show"));
        tabs.forEach((t) => t.classList.remove("active-tab"));

        document.getElementById(tabId).classList.add("show");
        element.classList.add("active-tab");

        // Save current tab
        localStorage.setItem("activeTab", tabId);

        // If page-specific initializer exists on window, call it
        if (window['init' + capitalize(tabId)]) {
          try { window['init' + capitalize(tabId)](); } catch (e) { console.error(e); }
        }
      }

      // On page load, open saved tab
      window.addEventListener("load", () => {
        const savedTab = localStorage.getItem("activeTab") || 'home';
        const tabElement = Array.from(document.querySelectorAll(".sidebar a"))
          .find((el) => el.getAttribute("onclick")?.includes(savedTab));
        if (tabElement) openTab(savedTab, tabElement);
      });

      function capitalize(s){ return s.charAt(0).toUpperCase()+s.slice(1); }
    </script>

    <!-- Load external script files-->
    <script type="module" src="script.js"></script>
    <script type="module" src="customer-script.js"></script>
    <script type="module" src="category-script.js"></script>
    <script type="module" src="sales-script.js"></script>
    <script type="module" src="suppliers-script.js"></script>
    <script type="module" src="table-script.js"></script>
    <script type="module" src="product-script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </body>
</html>
